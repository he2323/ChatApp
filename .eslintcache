[{"P:\\react+flask\\ChatApp\\src\\index.tsx":"1","P:\\react+flask\\ChatApp\\src\\Styles.tsx":"2","P:\\react+flask\\ChatApp\\src\\Components\\Chat.tsx":"3","P:\\react+flask\\ChatApp\\src\\Components\\Logged.tsx":"4","P:\\react+flask\\ChatApp\\src\\Containers\\StartGreet.tsx":"5","P:\\react+flask\\ChatApp\\src\\Components\\App.tsx":"6","P:\\react+flask\\ChatApp\\src\\Containers\\InputField.tsx":"7","P:\\react+flask\\ChatApp\\src\\Containers\\ChoosenPerson.tsx":"8","P:\\react+flask\\ChatApp\\src\\Containers\\ChatList.tsx":"9","P:\\react+flask\\ChatApp\\src\\Containers\\ChoosenChat.tsx":"10","P:\\react+flask\\ChatApp\\src\\Containers\\FriendsList.tsx":"11","P:\\react+flask\\ChatApp\\src\\Containers\\Friend.tsx":"12","P:\\react+flask\\ChatApp\\src\\Components\\FriendMng.tsx":"13","P:\\react+flask\\ChatApp\\src\\Containers\\RepMsg.tsx":"14","P:\\react+flask\\ChatApp\\src\\Containers\\InitialOperation.tsx":"15","P:\\react+flask\\ChatApp\\src\\Containers\\MessasgeHandle.tsx":"16"},{"size":422,"mtime":1611523604911,"results":"17","hashOfConfig":"18"},{"size":5133,"mtime":1611526392827,"results":"19","hashOfConfig":"18"},{"size":4309,"mtime":1611522185429,"results":"20","hashOfConfig":"18"},{"size":4520,"mtime":1611522554957,"results":"21","hashOfConfig":"18"},{"size":280,"mtime":1610842564006,"results":"22","hashOfConfig":"18"},{"size":6929,"mtime":1611526322516,"results":"23","hashOfConfig":"18"},{"size":669,"mtime":1611523243499,"results":"24","hashOfConfig":"18"},{"size":443,"mtime":1611522566596,"results":"25","hashOfConfig":"18"},{"size":674,"mtime":1611522206067,"results":"26","hashOfConfig":"18"},{"size":403,"mtime":1610841572206,"results":"27","hashOfConfig":"18"},{"size":765,"mtime":1611522575788,"results":"28","hashOfConfig":"18"},{"size":835,"mtime":1611522227831,"results":"29","hashOfConfig":"18"},{"size":2799,"mtime":1611091530251,"results":"30","hashOfConfig":"18"},{"size":568,"mtime":1611520641803,"results":"31","hashOfConfig":"18"},{"size":1176,"mtime":1611526394552,"results":"32","hashOfConfig":"18"},{"size":620,"mtime":1611518966555,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1tervze",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"P:\\react+flask\\ChatApp\\src\\index.tsx",[],["69","70"],"P:\\react+flask\\ChatApp\\src\\Styles.tsx",[],"P:\\react+flask\\ChatApp\\src\\Components\\Chat.tsx",["71"],"import { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { ChatMain, ActualChat } from \"../Styles\";\r\nimport ChoosenPerson from \"../Containers/ChoosenPerson\";\r\nimport { SelElementI } from \"./Logged\";\r\nimport ChoosenChat from \"../Containers/ChoosenChat\";\r\nimport StartGreet from \"../Containers/StartGreet\";\r\nimport FriendMng from \"./FriendMng\";\r\nimport MessasgeHandle from \"../Containers/MessasgeHandle\";\r\nimport RepMsg from \"../Containers/RepMsg\";\r\nimport { useRef } from \"react\";\r\ninterface ChatI {\r\n  logOut: () => void;\r\n  updateUser: () => void;\r\n  selectedElement: SelElementI;\r\n  loggedUserId: number;\r\n  loggedUSer: any;\r\n}\r\ntype ChatInfoT = {\r\n  _id: number;\r\n  status: boolean;\r\n  messages: number[];\r\n  members_ids: number[];\r\n  img_link: string;\r\n  create_date: string;\r\n}\r\nconst Chat = ({\r\n  logOut,\r\n  updateUser,\r\n  selectedElement,\r\n  loggedUserId,\r\n  loggedUSer,\r\n}: ChatI) => {\r\n  const messagesEndRef = useRef(null);\r\n  const [sElementInfo, setsElementInfo] = useState({});\r\n  const [fetchMsg, setfetchMsg] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  const fetchElementData = async (id: number) => {\r\n    const elementResponse = await fetch(\r\n      selectedElement.type === \"friend\" ? \"/user_info\" : \"/chat_info\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          content_type: \"application/json\",\r\n        },\r\n        body: JSON.stringify({ id: id }),\r\n      }\r\n    );\r\n    const elementData = await elementResponse.json();\r\n    setsElementInfo(elementData);\r\n    setfetchMsg(true);\r\n    return elementData;\r\n  };\r\n\r\n  const fetchMessages = async (messages: number[]) => {\r\n    const fetchedMessages = await fetch(\"/messages_info\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        content_type: \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        messages_ids: messages,\r\n      }),\r\n    });\r\n    const messagesData = await fetchedMessages.json();\r\n    setMessages(messagesData.messages);\r\n  };\r\n  useEffect(() => {\r\n    if (selectedElement.type === \"chat\") {\r\n      setfetchMsg(false);\r\n    }\r\n    scrollToBottom();\r\n  }, [selectedElement]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    const checkMessages = async() =>{if (selectedElement.type !== \"start\") {\r\n      const data: ChatInfoT = await fetchElementData(selectedElement.id);\r\n      if (selectedElement.type === \"chat\") {\r\n        fetchMessages(data.messages);\r\n      }\r\n    }}\r\n    checkMessages();\r\n    scrollToBottom();\r\n  }, [selectedElement, fetchMsg, loggedUSer]);\r\n\r\n  const sendMsg = async () => {\r\n    await fetch(\"/post_msg\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        content_type: \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        message: message,\r\n        sender_id: loggedUserId,\r\n        chat_id: selectedElement.id,\r\n      }),\r\n    });\r\n    await updateUser();\r\n    setfetchMsg(!fetchMsg);\r\n  };\r\n\r\n  return (\r\n    <ChatMain>\r\n      {/* // */}\r\n      {selectedElement.type === \"friend\" ? (\r\n        <ChoosenPerson\r\n          logOut={logOut}\r\n          image={sElementInfo.image_link}\r\n          name={sElementInfo.name}\r\n        />\r\n      ) : selectedElement.type === \"chat\" ? (\r\n        <ChoosenChat\r\n          logOut={logOut}\r\n          image={sElementInfo.image_link}\r\n          name={sElementInfo.name}\r\n        />\r\n      ) : (\r\n        <StartGreet />\r\n      )}\r\n      {/* // */}\r\n      {selectedElement.type === \"chat\" ? (\r\n        <ActualChat>\r\n          <RepMsg\r\n            loggedUserId={loggedUserId}\r\n            messages={messages}\r\n            messagesEndRef={messagesEndRef}\r\n          />\r\n        </ActualChat>\r\n      ) : selectedElement.type === \"friend\" ? (\r\n        <FriendMng\r\n          updateUser={updateUser}\r\n          selectedElement={selectedElement}\r\n          loggedUser={loggedUserId}\r\n        />\r\n      ) : (\r\n        <StartGreet isPlaceholder={true} />\r\n      )}\r\n      {/*  */}\r\n      <MessasgeHandle\r\n        message={message}\r\n        changeMessage={setMessage}\r\n        sendMsg={sendMsg}\r\n      />\r\n      {/*  */}\r\n    </ChatMain>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","P:\\react+flask\\ChatApp\\src\\Components\\Logged.tsx",["72"],"import {\r\n  ContactsList,\r\n  ModeSelect,\r\n  SearchBar,\r\n  Constacts,\r\n  SearchBox,\r\n  CrossDel,\r\n  ModeOption,\r\n  SearchUsers,\r\n} from \"../Styles\";\r\nimport { useState, useEffect } from \"react\";\r\nimport FriendsList from \"../Containers/FriendsList\";\r\nimport ChatList from \"../Containers/ChatList\";\r\nimport { ImCross } from \"react-icons/im\";\r\nexport interface SelElementI {\r\n  id: number;\r\n  type: \"friend\" | \"chat\" | \"start\";\r\n}\r\nexport interface UserO {\r\n  user_friends: number[];\r\n  loggedUserId: number;\r\n  selectedMode: string;\r\n  selectElement: ({ id, type }: SelElementI) => void;\r\n  selectMode: (mode: string) => void;\r\n}\r\nexport interface ElementI {\r\n  id: number;\r\n  name: string;\r\n  img_link: string;\r\n  status: boolean;\r\n}\r\ntype OptionT = {\r\n  label: string;\r\n  value: string | number;\r\n}\r\nconst Logged = ({\r\n  user_friends,\r\n  loggedUserId,\r\n  selectedMode,\r\n  selectMode,\r\n  selectElement,\r\n}: UserO) => {\r\n  const [user_friends_data_list, setUser_friends_data_list] = useState([]);\r\n  const [user_chat_data_list, setuser_chat_data_list] = useState([]);\r\n  // eslint-disable-next-line\r\n  const [options, setOptions] = useState([\r\n    { label: \"Start\", value: \"startingPage\" },\r\n    { label: \"Friends\", value: \"friends\" },\r\n    { label: \"Chats\", value: \"chats\" },\r\n  ]);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [similarUsers, setSimilarUsers] = useState([]);\r\n  useEffect(() => {\r\n    const fetchUserFriendsData = async () => {\r\n      const response = await fetch(`/friends_info`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          content_type: \"application/json\",\r\n        },\r\n        body: JSON.stringify({ ids: user_friends }),\r\n      });\r\n      const data = await response.json();\r\n\r\n      await setUser_friends_data_list(data.list);\r\n    };\r\n    const fetchUserChatsData = async () => {\r\n      const response = await fetch(`/chats`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          content_type: \"application/json\",\r\n        },\r\n        body: JSON.stringify({ id: loggedUserId }),\r\n      });\r\n      const data = await response.json();\r\n\r\n      await setuser_chat_data_list(data.list);\r\n    };\r\n    if (user_friends.length > 0) fetchUserFriendsData();\r\n    fetchUserChatsData();\r\n  }, [user_friends, loggedUserId]);\r\n  const get_users = async () => {\r\n    const response = await fetch(\"/search_user\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        content_type: \"application/json\",\r\n      },\r\n      body: JSON.stringify({ text: searchText }),\r\n    });\r\n    const data = await response.json();\r\n    await setSimilarUsers(data.list);\r\n  };\r\n  useEffect(() => {\r\n    if (searchText) {\r\n      get_users();\r\n    }\r\n  }, [searchText]);\r\n  return (\r\n    <ContactsList>\r\n      <ModeSelect\r\n        defaultValue={selectedMode}\r\n        onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\r\n          selectMode(event.currentTarget.value);\r\n          if (event.currentTarget.value === \"startingPage\")\r\n            selectElement({ id: 0, type: \"start\" });\r\n        }}\r\n      >\r\n        {options.map((option: OptionT) => (\r\n          <ModeOption key={option.value} value={option.value}>\r\n            {option.label}\r\n          </ModeOption>\r\n        ))}\r\n      </ModeSelect>\r\n      <SearchBox>\r\n        <SearchBar\r\n          type=\"text\"\r\n          value={searchText}\r\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) => setSearchText(event.currentTarget.value)}\r\n          placeholder=\"Search..\"\r\n          onKeyUp={get_users}\r\n        />\r\n        <CrossDel onClick={() => setSearchText(\"\")}>\r\n          <ImCross />\r\n        </CrossDel>\r\n      </SearchBox>\r\n      {searchText ? (\r\n        <SearchUsers onClick={() => setSearchText(\"\")}>\r\n          <FriendsList\r\n            friends_data={similarUsers}\r\n            loggedUserId={loggedUserId}\r\n            selectUser={selectElement}\r\n          />\r\n        </SearchUsers>\r\n      ) : null}\r\n      <Constacts big={user_friends.length > 10 ? 1 : 0}>\r\n        {selectedMode === \"friends\" ? (\r\n          <FriendsList\r\n            friends_data={user_friends_data_list}\r\n            loggedUserId={loggedUserId}\r\n            selectUser={selectElement}\r\n          />\r\n        ) : selectedMode === \"chats\" ? (\r\n          <ChatList\r\n            chats_data={user_chat_data_list}\r\n            loggedUserId={loggedUserId}\r\n            selectChat={selectElement}\r\n          />\r\n        ) : (\r\n          \"Greeting on chat app!\"\r\n        )}\r\n      </Constacts>\r\n    </ContactsList>\r\n  );\r\n};\r\n\r\nexport default Logged;\r\n","P:\\react+flask\\ChatApp\\src\\Containers\\StartGreet.tsx",[],"P:\\react+flask\\ChatApp\\src\\Components\\App.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\InputField.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\ChoosenPerson.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\ChatList.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\ChoosenChat.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\FriendsList.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\Friend.tsx",[],"P:\\react+flask\\ChatApp\\src\\Components\\FriendMng.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\RepMsg.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\InitialOperation.tsx",[],"P:\\react+flask\\ChatApp\\src\\Containers\\MessasgeHandle.tsx",[],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":93,"column":6,"nodeType":"79","endLine":93,"endColumn":45,"suggestions":"80"},{"ruleId":"77","severity":1,"message":"81","line":96,"column":6,"nodeType":"79","endLine":96,"endColumn":18,"suggestions":"82"},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchElementData'. Either include it or remove the dependency array.","ArrayExpression",["85"],"React Hook useEffect has a missing dependency: 'get_users'. Either include it or remove the dependency array.",["86"],"no-global-assign","no-unsafe-negation",{"desc":"87","fix":"88"},{"desc":"89","fix":"90"},"Update the dependencies array to be: [selectedElement, fetchMsg, loggedUSer, fetchElementData]",{"range":"91","text":"92"},"Update the dependencies array to be: [get_users, searchText]",{"range":"93","text":"94"},[2695,2734],"[selectedElement, fetchMsg, loggedUSer, fetchElementData]",[2673,2685],"[get_users, searchText]"]